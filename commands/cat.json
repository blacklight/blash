{
	"name" : "cat",

	"info" : {
		"syntax" : "cat &lt;file&gt;",
		"brief" : "Show the content of a page",
	},

	"action" : function ( arg )
	{
		var out = '';
		var found = false;
		var dir = shell.files;

		if ( !arg || arg.length == 0 )
		{
			return "Argument required<br/>\n";
		}

		arg = shell.expandPath ( arg );

		for ( var i=0; i < dir.length && !found; i++ )
		{
			if ( dir[i].path == arg )
			{
				found = true;

				if ( dir[i].type == 'directory' )
				{
					return "cat: " + dir[i].path + ": Is a directory<br/>\n";
				} else {
					if ( dir[i].href )
					{
						window.open ( dir[i].href );
					} else if ( dir[i].content ) {
						return '<pre>' + dir[i].content + "</pre>";
					}
				}
			}
		}

		if ( !found )
		{
			arg = arg.replace ( '<', '&lt;' );
			arg = arg.replace ( '>', '&gt;' );
			return "cat: " + arg + ": No such file or directory<br/>\n";
		}

		out = out.replace ( /<br\/?>\s*$/, '' );
		return out;
	}
}

